<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Greenbutton-ruby by interlink</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/interlink/greenbutton-ruby">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/interlink/greenbutton-ruby/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/interlink/greenbutton-ruby/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Greenbutton-ruby</h1>
          <p>Greenbutton XML Data parser for Ruby/Rails</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/interlink">interlink</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span>
        </div>

        <p><a href="http://travis-ci.org/interlink/greenbutton-ruby"><img src="https://secure.travis-ci.org/interlink/greenbutton-ruby.png" alt="Build Status"></a></p>

<h2>Introduction</h2>

<p>This is a simple ruby gem for parsing <a href="http://www.greenbuttondata.org/">GreenButton</a> data from either an XML file or an XML file loaded into a string.</p>

<h2>Basic Usage</h2>

<p>Basically, this gem provides a convenient way to load and inspect GreenButton data.  It will take care or normalizing
energy usage to kWh and cost to USD by taking into account the multiplier and other related parameters specified in the
provided XML.</p>

<p>You can use this library like this:</p>

<div class="highlight">
<pre><span class="no">GreenButton</span><span class="o">::</span><span class="no">GreenButtonData</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"mydata.xml"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span> <span class="n">entries</span> <span class="o">|</span>
    <span class="n">entries</span><span class="o">.</span><span class="n">each</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span>
        <span class="nb">puts</span> <span class="n">e</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre>
</div>


<p>If you prefer not to provide a block during initialization, you can always access loaded
data like this:</p>

<div class="highlight">
<pre><span class="n">data</span> <span class="o">=</span> <span class="no">GreenButton</span><span class="o">::</span><span class="no">GreenButtonData</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"mydata.xml"</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span>
    <span class="nb">puts</span> <span class="n">e</span>
<span class="k">end</span>
</pre>
</div>


<p>The loaded data object and the entries there-in print information about loaded data:</p>

<div class="highlight">
<pre><span class="c1"># print sumary of loaded data-set</span>
<span class="nb">puts</span> <span class="n">data</span>
<span class="c1"># prints something like:</span>
<span class="c1"># 2012-07-02 01:16:47 -0500 to: 2012-07-02 01:18:27 -0500, usage: 275.00kWh, cost: $550.00</span>
</pre>
</div>


<p>This is a more flexible way of accessing data since it allows simple Enumerable operations:</p>

<div class="highlight">
<pre><span class="n">total_cost</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">sum</span><span class="p">,</span> <span class="n">e</span><span class="o">|</span> <span class="n">sum</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="n">cost</span> <span class="p">}</span>

<span class="n">all_costs</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="n">e</span><span class="o">.</span><span class="n">cost</span> <span class="p">}</span>
<span class="c1"># all_costs = [1.21, 2.32, 1.34 ...]</span>
</pre>
</div>


<h2>License</h2>

<p>This software is provided under the MIT license.  Please read the accompanied LICENSE for more details.</p>

<h2>Work in Progress</h2>

<p>This library is a work in progress and new features are being added constantly. Stay tuned!</p>

<h2>Thanks to</h2>

<p>This project has been sponsored by <a href="http://www.ilinknet.com/">Interlink Network Systems</a>.  Thanks!</p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
    
  </body>
</html>